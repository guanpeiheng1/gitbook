# 系统和硬件的相关知识及维护

## 操作系统类型

### Windows

Windows的版本迭代如下。

| 年份 | 操作系统 |
| :--- | :--- |
| 1985 | Windows 1.X |
| 1987 | Windows 2.X |
| 1990 | Windows 3.X |
| 1993 | Windows NT 3.1 |
| 1994 | Windows NT 3.5 |
| 1995 | Windows NT 3.51 |
| 1995 | Windows 95 |
| 1996 | Windows Nashville |
| 1996 | Windows NT 4.0 |
| 1998 | Windows 98 |
| 1999 | Windows Nepture |
| 2000 | Windows ME |
| 2000 | Windows 2000 |
| 2001 | Windows Whister |
| 2001 | Windows XP |
| 2003 | Windows Server 2003 |
| 2003 | Windows Whister Server |
| 2005 | Windows Server 2003 R2 |
| 2005 | Windows Longhorn |
| 2005 | Windows Vista |
| 2007 | Windows Home Server |
| 2008 | Windows Server 2008 |
| 2009 | Windows Server 2008 R2 |
| 2009 | Windows 7 |
| 2011 | Windows Thin PC |
| 2012 | Windows 8 |
| 2012 | Windows Phone 8 |
| 2012 | Windows Server 2012 |
| 2013 | Windows Server 2012 R2 |
| 2013 | Windows 8.1 |
| 2014 | Windows Phone 8.1 |
| 2015 | Windows 10 |

### Linux

Linux有很多的发行版本，其中最常用的就是`Ubuntu`，服务器则常用`CentOS`、`Debian`等。

### macOS

macOS是苹果电脑的专用系统，基于Linux内核。由于苹果生态的封闭性，需要通过特殊方法才能在普通电脑上安装。

## 32位与64位

### 「位」引出的存储单位

`位`或称为`比特（bit）`是计算机的`最小数据储存单位`，而`字节（Byte）`是`储存容量的基本单位`，1Byte=8bit。打开一个记事本并直接保存，右键查看刚才新建的文本文档的属性，其大小是0字节。在文本文档中输入一个英文字母再保存，文件的大小变成1字节。

ASCII码用于表示字符。一个字符用8位的二进制数表示，共可表示28=256个字符。二进制数的每一位就是bit，而一个Byte相当于一个字符。字节过后接着就是`Kibibyte（KiB）`、`Mebibyte（MiB）`、`Gibibyte（GiB）`、`Tebibyte（TiB）`等，它们之间的换算是210=1024。

```text
1Byte=8bit
1KiB=1024Byte
1MiB=1024KiB
1GiB=1024MiB
1TiB=1024GiB
```

由于操作系统的不严谨，在Windows中1 KB就是1 KiB，因此Windows里显示的KB / MB / GB / TB，即为KiB / MiB / GiB / TiB。但实际上`KB（千字节）`和`KiB（千位二进制字节）`是不同的单位，`Kilobyte（KB）`、`Megabyte（MB）`、`Gigagate（GB）`、`Terabyte（TB）`等之间的换算是103=1000。一个64G的U盘指的是64GB，而Windows会将其转换为GiB，但显示成GB，体现出来就是U盘容量变小了。

```text
1KB=1000Byte
1MB=1000KB
1GB=1000MB
1TB=1000GB
```

`B`代表的是字节，`b`代表的是位，因此KiB指的是210 Byte，而Kib表示的是210 bit，有如下换算关系。运营商声称的宽带50兆实际上指的是`50Mbps`，即`50M bit per second`。下载时的速度以MiB/s来定义，所以50兆宽带最高的下载速度是`50÷8=6.25MiB/s`。

```text
1KiB=8Kib
1MiB=8Mib
1MiB/s=8Mbps
```

![&#x8BA1;&#x7B97;&#x673A;&#x6570;&#x636E;&#x5355;&#x4F4D;&#x5BF9;&#x7167;&#x8868;](https://i.loli.net/2019/06/04/5cf5e5112028e97937.png)

### 处理器位数

`处理器（CPU）`有`32位`和`64位`之分，指CPU一次可以处理32/64位数据（4/8个字节）。这里的32/64位被称为`CPU位宽`，全称为`数据总线位宽`。易知64位CPU的处理速度比32位快一倍。

CPU处理的数据是放在内存里的，为了读取这些数据，CPU需要知道这些数据在内存的地址。字节是内存的基本单位。

CPU在找地址的时候，并不需要把整个Byte都看一遍，只要看这个Byte的第一个bit。计算机需要把第一个bit的地址用二进制表示，而这个二进制数的位数决定了CPU能够识别的内存大小，被称为`地址总线位宽`。

地址总线位宽和数据总线位宽并不相同，32位CPU的数据总线位宽是32位，但地址总线位宽要视CPU的设计而定。假设它的地址总线位宽为36位，则它能找到236个地址，每个地址对应1Byte内存空间，故一共能识别236Byte=64GiB的内存。

![&#x5185;&#x5B58;&#x548C;&#x5185;&#x5B58;&#x5730;&#x5740;](https://i.loli.net/2019/06/05/5cf708a56482a64244.png)

### 操作系统位数

操作系统的位数可以理解为CPU的地址总线位宽。32位的系统最多能够识别232Byte=4GiB的内存，64位的系统理论上最多能够识别264Byte=17179869184GiB的内存，实际上目前最大能够支持128GiB内存。所谓`32位不支持4GiB以上内存`的说法针对的是`操作系统`，而不是CPU。

## 存储器

### 硬盘

#### SSD和HDD

SSD是固态硬盘，采用闪存颗粒进行储存。SDD运行速度快，随着时间流逝，SSD中的数据会逐渐消失。数据一般能够存留5-10年。

HDD是机械硬盘，用盘片进行储存。HDD运行速度慢，但数据基本能够一直存留。

#### 损坏修复

**锁盘**

主要表现为无法修改分区表，即无法删除、添加、格式化分区等。

**HDD**

可尝试低级格式化，工具如下。注意低级格式化对SSD无效。

```text
https://www.onlinedown.net/soft/265727.htm
```

**SSD**

需要重新开卡，即重新刷入固件。

首先需要确定主控和闪存颗粒的型号，可通过直接拆下硬盘外壳，也可以通过SSD-Z等软件查看。本硬盘主控为SM2258XT，闪存为Hydix（海利士）的H27Q2T8QEA9R。

根据主控可以查找到相应的开卡工具。对于SM2258XT而言，其开卡工具为MPTool。由于MPTool有非常多版本，需要根据闪存寻找。

对于本闪存，可通过网络或以下的`开卡便携工具`确定其为HY3D-V4，即Hydix的3D颗粒的第四代。

```text
https://club.liangchanba.com/thread-896-1-1.html
```

确认闪存的类别后，可通过以下链接下载MPTool。注意，版本并不是越新越好，因此需要将每一个版本都下载下来。

```text
https://www.usbdev.ru/files/smi/sm2258xtmptool/
```

开卡前需到BIOS更改系统启动方式为IDE，否则开卡工具无法扫描到硬盘。用硬盘盒以USB方式将要开卡的硬盘连接到电脑，若硬盘无法被识别，可将主板上两个ROM触点短接以进入工程模式（ROM模式），电脑将识别为一个1023MB的硬盘。

打开MPTool，点击`Scan Drive`并确认程序能够找到硬盘。点击`Config`，选择`Edit config`，密码为两个空格。然后点击Flash一栏的`Auto`自动识别闪存，若识别失败，则需要更换另一版本的程序。识别成功后点击`Save Config`保存，然后回到硬盘页并点击`Start`开始开卡。若卡在某一步（如Dump System Block），则需要更换版本。

开卡成功后用DiskGenius等删除原有分区并重新划分即可。对于Hydix的闪存H27Q2T8QEA9R，可用版本为SM2258XT\_HY3D-V4\_PKGS0402A\_FWS0330B0。

### 内存与硬盘的关系

CPU从`内存`读取数据，内存从`硬盘`获取数据。内存的速度比硬盘快，但每次断电后内存的数据都会清空。每次系统启动时，内存从硬盘加载数据，CPU对内存的数据进行处理，这样就完成了一次开机。内存处理完数据后往硬盘写入数据，保证断电后数据不会丢失。

## EDID

EDID用于描述显示屏的属性。以下面的EDID为例说明。

```text
        0   1   2   3   4   5   6   7   8   9   
000  |  00  FF  FF  FF  FF  FF  FF  00  06  AF
010  |  7C  9C  00  00  00  00  00  16  01  04
020  |  95  1F  11  78  02  9F  E5  96  58  53
030  |  8A  26  24  50  54  00  00  00  01  01
040  |  01  01  01  01  01  01  01  01  01  01
050  |  01  01  01  01  B0  36  80  B4  70  38
060  |  1E  40  30  20  31  00  35  AD  10  00
070  |  00  18  00  00  00  FC  00  43  6F  6C
080  |  6F  72  20  4C  43  44  0A  20  20  20
090  |  00  00  00  10  00  00  00  00  00  00
100  |  00  00  00  00  00  00  00  00  00  00
110  |  00  10  00  00  00  00  00  00  00  00
120  |  00  00  00  00  00  00  00  6F
```

### 表头信息（0x00-0x13）

| 偏移值（十六进制） | 偏移值（十进制） | 含义 |
| :--- | :--- | :--- |
| 0x00-0x07 | 1-7 | 表头信息 |
| 0x08-0x09 | 8-9 | 制造商ID（00001=A，00002=B，以此类推，假设制造商ID为CEA，即00011 00101 00001，则从高位往低位取） |
| 0x0A-0x0B | 10-11 | 产品ID |
| 0x0C-0x0F | 12-15 | 显示器序列号 |
| 0x10 | 16 | 生产周数 |
| 0x11 | 17 | 生产年份（加上1990才是确实的年份） |
| 0x12 | 18 | EDID版本号 |
| 0x13 | 19 | EDID修订版本号 |

### 基本显示参数（0x14-0x18）

| 偏移值（十六进制） | 偏移值（十进制） | 含义 |
| :--- | :--- | :--- |
| 0x14 | 20 | 画面输入定义 |
| 0x15 | 21 | 最大水平图形尺寸（厘米） |
| 0x16 | 22 | 最大垂直图形尺寸（厘米） |
| 0x17 | 23 | 显示伽码（除以100再加1才是真正的值） |
| 0x18 | 24 | 电源管理与支持 |

### 色度调节（0x19-0x22）

| 偏移值（十六进制） | 偏移值（十进制） | 含义 |
| :--- | :--- | :--- |
| 0x19 | 25 |  |
| 0x1A | 26 |  |
| 0x1B-0x22 | 27-34 |  |
| 0x23 | 35 | 建立时脉I |
| 0x24 | 36 | 建立时脉II |
| 0x25 | 37 | 制造商保留的时脉 |
| 0x24–0x35 | 36-53 | 标准时脉识别 |

### 详细时脉描述（0x36–0x47）

| 偏移值（十六进制） | 偏移值（十进制） | 含义 |
| :--- | :--- | :--- |
| 0x36–0x37 | 54-55 | 像素时脉（单位为10kHz）或0（55MSB/54LSB） |

#### 像素时脉有效时

| 偏移值（十六进制） | 偏移值（十进制） | 含义 |
| :--- | :--- | :--- |
| 0x38 | 56 | 水平活跃（单位为像素） |
| 0x39 | 57 | 水平空白（单位为像素） |
| 0x3A | 58 | 水平活跃高（4高位元） 水平空白高（4低位元） |
| 0x3B | 59 | 垂直活跃（单位为线） |
| 0x3C | 60 | 垂直空白（单位为线） |
| 0x3D | 61 | 垂直活跃在高有效位（4高位元） 垂直空白在高有效位（4低位元） |
| 0x3E | 62 | 水平同步偏移量（单位为像素） |
| 0x3F | 63 | 水平同步脉冲宽度（单位为像素） |
| 0x40 | 64 | 垂直同步偏移量（单位为线）（4高位元） 垂直同步脉冲宽度（单位为线）（4低位元） |
| 0x41 | 65 | 高有效位关于水平同步偏移量（位元7-6） 高有效位关于水平同步脉冲宽度（位元5-4） 高有效位关于垂直同步偏移量（位元3-2） 高有效位关于垂直同步脉冲宽度（位元1-0） |
| 0x42 | 66 | 水平图像尺寸（单位为公厘） |
| 0x43 | 67 | 垂直图像尺寸（单位为公厘） |
| 0x44 | 68 | 高有效位关于水平图像尺寸（4高位元） 高有效位关于垂直图像尺寸（4低位元） |
| 0x45 | 69 | 水平边界线（单位为像素且只表示一边） |
| 0x46 | 70 | 垂直边界线（单位为线且只表示一边） |
| 0x47 | 71 | 交错与否（位元7） 立体与否（位元6-5，00表示否） 分离同步与否（位元4-3） 垂直同步正与否（位元2） 水平同步正与否（位元1） 立体模式（位元0，若6-5是00则未使用） |

#### 像素时脉无效时

| 偏移值（十六进制） | 偏移值（十进制） | 含义 |
| :--- | :--- | :--- |
| 0x38 | 56 | 0 |
| 0x39 | 57 | 区块型态（FFh=监视器序号，FEh=ASCII字串，FDh=监视器变动限制，FCh=监视器名称，FBh=色彩点资料，Fah，标准时脉资料，F9h=现在未定义，0Fh=由制造商定义） |
| 0x3A | 58 | 0 |

